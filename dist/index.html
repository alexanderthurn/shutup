<html>
<head>
    <title>Shut up</title>
    <meta charset="utf-8">
    <meta id="meta-description" name="description" content="Use your microphone to shut your noise enemies up.">
    <meta id="meta-tags" name="tags" content="Noise alarm, shut up, too loud, webcam">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=yes">
</head>

<body>

<script type="text/javascript">!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e){function t(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function n(e){for(var t=0,n=e.length,o=0;o<n;o++)t+=e[o];return t/n}e.exports={getCursorPosition:t,getAverageValue:n}},function(e,t,n){var o=n(0);document.addEventListener("DOMContentLoaded",function(){function e(e){a.innerHTML=e}function t(t,n){i=!0,a.style.font="30px Arial",a.style.textAlign="center",e(t||(window.location.protocol&&window.location.protocol.indexOf("https")>-1?"Sorry. This browser does not support microphone access (Or you did not allow the access). The app does not work without access. Best solution right now is a modern Chrome on a desktop computer (mac/windows/linux) !"+(n?"["+n+"]":""):"Sorry. This browser does not support microphone access (Or you are not accessing this page via https). The app does not work without access. Best solution right now is a modern Chrome on a desktop computer (mac/windows/linux) !"+(n?"["+n+"]":"")))}var n=Math.floor(document.body.clientWidth),i=!1,r=document.createElement("canvas");r.id="canvasHistory",r.width=Math.floor(n),r.height=Math.floor(.3*n),r.style.width="80%",r.style.marginLeft="10%",r.style.marginTop="10px",document.body.appendChild(r),document.body.style.margin=0,document.body.style.backgroundColor="#000000";var a=document.createElement("a");a.id="btnMute",a.innerHTML="1. Allow mic access<br />2. Turn your speaker on",a.style.color="#ffffff",a.style.display="block",a.style.font="20px Arial",a.style.width="80%",a.style.minHeight="50px",a.style.marginLeft="10%",a.style.textAlign="right",a.style.marginBottom="20px",document.body.appendChild(a);var l=document.createElement("div");l.id="textInfo",l.style.marginLeft="10%",l.style.width="80%",l.style.textAlign="center",l.style.color="#ffffff",l.innerHTML='This application uses your microphone to detect the noise level in your office, room or wherever you are. You can choose a specific noise level that you are willing to take. If the volume gets above this level, an evil sine alarm sound will crush your noise enemy. Have fun. Author: Alexander Thurn 2017, <p><a style="color: #ffffff" href="https://froso.de">Frontend Solutions</a> <a style="color: #ffffff" href="https://github.com/alexanderthurn/shutup">Github</a></p>',document.body.appendChild(l);var c=c||window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext;if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,!c||!navigator.getUserMedia||!Array.prototype.slice)return void t(null,2*!c+4*!navigator.getUserMedia+8*!Array.prototype.slice);var s=new c,u=new c,f=s.createOscillator();f.type="sine",f.frequency.value=5800;var d=s.createGain();d.gain.value=0;var h=s.createGain();h.gain.value=1,f.connect(d),d.connect(h),h.connect(s.destination),f.start();var g,p,v=u.createBiquadFilter();v.type="notch",v.frequency.value=5800,v.Q.value=.01;var y=u.createAnalyser();y.smoothingTimeConstant=.3,y.fftSize=1024;var m=u.createScriptProcessor(1024,1,1);m.onaudioprocess=function(){var e=new Uint8Array(y.frequencyBinCount);y.getByteFrequencyData(e);var t=o.getAverageValue(e);g=.05*t},navigator.getUserMedia({audio:!0},function(t){p=u.createMediaStreamSource(t),p.connect(v),v.connect(y),y.connect(m),m.connect(u.destination),e("Mute alarm sound")},function(){t(null,16)}),a.onclick=function(){i||(h.gain.value>0?(h.gain.value=0,e("Unmute alarm sound")):(h.gain.value=1,e("Mute alarm sound")))};var w=.5;r.addEventListener("click",function(e){var t=o.getCursorPosition(r,e);w=1-t.y/r.offsetHeight},!1);for(var x=r.getContext("2d"),A=[],M=0;M<n;M++)A.push(0);var b=function(){x.fillStyle="#000000",x.fillRect(0,0,r.width,r.height),x.font=.5*r.height+"px Arial",x.textAlign="center",x.textBaseline="middle",x.fillStyle="rgba(255,0,0,"+d.gain.value+")",x.fillText("SHUT UP",.5*r.width,.5*r.height);for(var e=0;e<n;e++){var t=A[e];x.fillStyle="#ff0000",x.fillRect(e*r.width/n,r.height-t*r.height,r.width/n,t*r.height)}x.fillStyle="#ffffff",x.fillRect(0,(1-w)*r.height-1,r.width,2),x.font="15px Arial",x.fillStyle="#ffffff",x.textAlign="left",x.textBaseline="bottom",x.fillText("MAXIMUM NOISE THAT YOU ARE WILLING TO TAKE",5,(1-w)*r.height-1),x.textAlign="left",x.textBaseline="top",x.fillText("NOISE LEVEL (no unit)",5,0),x.textAlign="right",x.textBaseline="bottom",x.fillText("Time (seconds)",r.width,r.height-2),x.fillRect(0,0,2,r.height),x.fillRect(0,r.height-2,r.width,2)},T=function(){setTimeout(function(){A.unshift(g),A.pop();var e=o.getAverageValue(A.slice(0,30));e>w?d.gain.value<.1?d.gain.value=.1:(d.gain.value*=1.05+.2*(e-w),d.gain.value>1&&(d.gain.value=1)):d.gain.value*=.95,b(),T()},30)};T(),window.onresize=function(){for(n=Math.floor(document.body.clientWidth),r.width=Math.floor(n),r.height=Math.floor(.3*n);A.length<n;)A.push(0)}})}])</script></body>

</html>
